# YOLO Backbone 前几层计算过程解析
详解 YOLO 模型中 Backbone 的前几层结构及其特征图尺寸变化，适用于模型结构可视化、教学分析和调试参考。
## 输入张量
输入维度：1 × 3 × 640 × 640
说明：BatchSize = 1，通道数 = 3（RGB），图像尺寸为 640×640
## 📚 层级计算过程明细

### 🔹 Layer0: 卷积层（Conv）

- 配置参数：`conv 3, 16, kernel_size=3, stride=2`
- 输入维度：`1 × 3 × 640 × 640`
- 输出维度：`1 × 16 × 320 × 320`

**尺寸计算公式：**

\[
\text{Output Size} = \left\lfloor \frac{640 - 3 + 2 \times 1}{2} \right\rfloor + 1 = 320
\]

> 默认使用 padding=1 实现“半卷积”，使输出大小减半。

---

### 🔹 Layer1: 卷积层（Conv）

- 配置参数：`conv 16, 32, kernel_size=3, stride=2`
- 输入维度：`1 × 16 × 320 × 320`
- 输出维度：`1 × 32 × 160 × 160`

\[
\text{Output Size} = \left\lfloor \frac{320 - 3 + 2 \times 1}{2} \right\rfloor + 1 = 160
\]

---

### 🔹 Layer2: C2f 模块（YOLOv8 特有结构）

- 配置参数：`c2f 32, 32, num_blocks=1, shortcut=True`
- 输入维度：`1 × 32 × 160 × 160`
- 输出维度：`1 × 32 × 160 × 160`

> C2f 是 Cross Stage Partial 的优化形式，融合了残差结构和部分计算，**保持空间分辨率不变**。

---

### 🔹 Layer3: 卷积层（Conv）

- 配置参数：`conv 32, 64, kernel_size=3, stride=2`
- 输入维度：`1 × 32 × 160 × 160`
- 输出维度：`1 × 64 × 80 × 80`

\[
\text{Output Size} = \left\lfloor \frac{160 - 3 + 2 \times 1}{2} \right\rfloor + 1 = 80
\]

---

## ✅ 总结表格

| 层编号 | 类型     | 参数配置                | 输入尺寸           | 输出尺寸           | 功能说明                     |
|--------|----------|--------------------------|--------------------|--------------------|------------------------------|
| Layer0 | Conv     | 3→16, 3×3, stride=2      | 1×3×640×640        | 1×16×320×320       | 初始特征提取，下采样         |
| Layer1 | Conv     | 16→32, 3×3, stride=2     | 1×16×320×320       | 1×32×160×160       | 加深通道，下采样             |
| Layer2 | C2f      | 32→32, repeat=1, shortcut | 1×32×160×160       | 1×32×160×160       | 增强表达，保持尺寸不变       |
| Layer3 | Conv     | 32→64, 3×3, stride=2     | 1×32×160×160       | 1×64×80×80         | 通道加深，继续下采样         |

---

## 📌 注释说明

- `Conv`：标准卷积层（包含 BatchNorm + SiLU 激活）
- `C2f`：YOLOv8 中用于提取特征的轻量残差模块，提升性能
- 所有计算默认使用 `padding=1`，实现“same”风格输出控制
